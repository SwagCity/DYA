<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    
    <title>Collapsible Tree Example</title>
    
    
    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="../static/libs/bootstrap/css/bootstrap.min.css" type="text/css">

    <!-- Custom Fonts -->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="../static/libs/bootstrap/font-awesome/css/font-awesome.min.css" type="text/css">

    <!-- Plugin CSS -->
    <link rel="stylesheet" href="../static/libs/bootstrap/css/animate.min.css" type="text/css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="../static/libs/bootstrap/css/creative.css" type="text/css">
    
    <!-- load the d3.js library -->
    <script src="static/libs/d3.min.js"></script>
  </head>
  
  <style>
    
  </style>
  
  <body>
    
    
    <nav id="mainNav" class="navbar navbar-default navbar-fixed-top">
      <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand page-scroll" href="#page-top">Swagcess</a>
        </div>
	
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
	  
          <ul class="nav navbar-nav navbar-right">
	    <!--
		<li>
		  <a class="page-scroll" href="#about">About</a>                               </li>
		-->
	    
            <li>
              <a class="page-scroll" href="#contact">Contact</a>
            </li>
	    <li>
              <a href="/login">Login</a>
            </li>
          </ul>
        </div>
        <!-- /.navbar-collapse -->
      </div>
      <!-- /.container-fluid -->
    </nav>
    
    <header>
      <div id="chart">
	
      </div>
      
      
      
      <script>
	
	/*
	README
	
	So this is how I think it's going to map out.
	D3 is going to have first-hand access to the data.
	It has to render everything nicely into colored, labelled circles.
	It also has to save a variable in the marionette view that contains the ID of the current node in view. It's going to start out with the title node.
	Everything above and below the current node will be rendered.
	The current node needs a nice animation to turn it from a circle into the box of text. (Material design, anyone?)
	The circular nodes need nice animations to turn them from hiding into circles, or vice versa.
	Everything else is going to be set to hidden (or maybe tiny? idk, whatever looks better)
	
	Questions that need answering:
	Do nodes really need to know their parents?
	
	*/
	
	
	var story = [
	{
	"_id": "toplevel1",
	"snippet" : "short people",
	"children" : []
	},
	{
	"_id": "toplevel2",
	"snippet" : "In a hole in the ground there lived a hobbit. Not a nasty, dirty, wet hole, filled with the ends of worms and an oozy smell, nor yet a dry, bare, sandy hole with nothing in it to sit down on or to eat: it was a hobbit-hole, and that means comfort.",
	"children" : [
	{
	"snippet" : "It had a perfectly round door like a porthole, painted green, with a shiny yellow brass knob in the exact middle. The door opened on to a tube-shaped hall like a tunnel: a very comfortable tunnel without smoke, with panelled walls, and floors tiled and carpeted, provided with polished chairs, and lots and lots of pegs for hats and coats - the hobbit was fond of visitors. The tunnel wound on and on, going fairly but not quite straight into the side of the hill - The Hill, as all the people for many miles round called it - and many little round doors opened out of it, first on one side and then on another. No going upstairs for the hobbit: bedrooms, bathrooms, cellars, pantries (lots of these), wardrobes (he had whole rooms devoted to clothes), kitchens, dining-rooms, all were on the same floor, and indeed on the same passage. The best rooms were all on the left-hand side (going in), for these were the only ones to have windows, deep-set round windows looking over his garden and meadows beyond, sloping down to the river.",
      "_id" : "secondlevel1",	
	"children" : [
	{
	"snippet" : "Bilbo was a derp",
	"_id" : "thirdlevel1",
	"children" : []
	}
	]
	},
	{
	"snippet" : "The hole was empty.",
	"_id" : "secondlevel2",
	"children" : []
	}
	]
	}
	];
	
	// Allow all of the nodes to be able to access its own parent.
	var setParents = function(tree) {
	var setParent = function (obj) {
	if (obj.children != undefined) {
	for (c in obj.children) {
	obj.children[c].parent = obj;
	setParent(obj.children[c]);
	}
	}
	}
	for (n in tree) {
	setParent(tree[n]);
	}
	}(story);
	
	
	var tree = d3.select("#chart");
	function renderNode(node, data) {
	node.selectAll(".snippet")
	.data(data)
	.enter()
	.append("div")
	.attr("id", function(d,i) {return d._id})
	.classed(".snippet", true)
	.text(function(d) {return d.snippet})
	.each(function(d,i) {
	if (d.children) {
	renderNode(d3.select("#"+data[i]._id), d.children);
	}
	})
	}
	renderNode(tree, story);
	
	
	
      </script>
    </header>
  </body>
</html>
